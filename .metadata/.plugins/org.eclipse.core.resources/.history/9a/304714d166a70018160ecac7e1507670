<%@ page language="java" contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> -->
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

 <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
   <script type="text/javascript">
      google.charts.load('current', {'packages':['gauge']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
	
    	var locate= ${location}*100;
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['제목-본문 유사도', locate],
        ]);

        var options = {
          width: 300, height: 300,
          minorTicks: 5
        };

        var chart = new google.visualization.Gauge(document.getElementById('chart_div'));

        chart.draw(data, options);

      }

    </script>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
    	  
    	  
    	var pos= {$positive};
    	var neg= {$negative};

        var data = google.visualization.arrayToDataTable([
          ['Task', '긍정, 부정 비율'],
          ['Positive',  pos   ],
     	  ['Negative',  neg  ]
        ]);

        var options = {
          title: '기사 본문 긍정적/부정적 비율 분석'
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
      }
    </script>
</head>
<body>
<div>
    <form id="writeForm" name="writeForm" method="post">
        <div>
            <h2>스크랩</h2>
            <div>
                <table>
                    <tr>
                        <th>제목</th>
                        <td><input style="width: 500px" type="text" id="title" name="title" value="${title}"/></td>
                    </tr>
                    <tr>
                        <th>내용</th>
                        <td><textarea style="width: 500px" rows="10" cols="10" id="content" name="content">
                        ${content}
                        </textarea></td>
                    </tr>
                    <tr>
                        <th>URL</th>
                        <td><input style="width: 500px" type="text" id="url" name="url" value="${url}"/></td>
                    </tr>
                </table>
                <div>
                    <a href='#' onClick='fn_addtoBoard()' class="btn btn-success" >등록</a>
                    <a href='#' onClick='fn_cancel()' 	  class="btn btn-success" >목록</a>
                </div>
            </div>	
        </div>
    </form>
    
     <!-- 제목, 본문 출력-->
   <img src = "${path}" height=400, width=600/>
   <div id="piechart" style="width: 900px; height: 500px;"></div>
   <div id="chart_div" style="width: 400px; height: 400px;"></div>
  
<script>
//글쓰기
function fn_addtoBoard(){
    
    var form = document.getElementById("writeForm");
    
    form.action = "<c:url value='/write'/>";
    form.submit();
    
}
 
//목록
function fn_cancel(){
    
    var form = document.getElementById("writeForm");
    
    form.action = "<c:url value='/'/>";
    form.submit();
    
}
</script>
</div>
</body>
</html>